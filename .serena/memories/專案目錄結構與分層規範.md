# PetLog 專案目錄結構與分層規範

## 頂層結構
- `cmd/`：Go 執行進入點（main.go, wire.go）
- `internal/`：核心程式碼，嚴格分層
  - `domain/`：領域模型（model/）、倉儲介面（repository/）、錯誤定義（errors.go）
  - `usecase/`：應用層（command/、query/、behavior/）
  - `endpoint/`：Go-kit endpoint，DTO 轉換
  - `transport/`：HTTP/gRPC handler（Gin）
  - `infra/`：資料庫實作（mongodb/）
  - `config/`：設定載入與 Viper 整合
  - `pkg/`：共用工具（contextx, logx）
- `api/`：Swagger 文件
- `web/`：Next.js 前端（App Router, Tailwind, Shadcn UI）
- `deployments/`：IaC（Terraform, K8s, docker-compose）
- `test/`：整合/E2E 測試

## Clean Architecture 分層
- **Domain**：純領域模型（僅 json tag）、倉儲介面、標準錯誤
- **Usecase**：業務流程 handler，依賴 domain 層
- **Endpoint**：DTO 轉換，Go-kit endpoint
- **Transport**：Gin handler，負責路由與 HTTP 轉換
- **Infra**：MongoDB 實作，持久化模型與 toDomain/fromDomain 轉換

## 前端結構
- `web/src/app/`：App Router 路由
- `web/src/components/`：全域/功能元件
- `web/src/lib/`：API 封裝、型別、工具
- `web/src/hooks/`：React Query hooks
- `web/src/styles/`：全域樣式

## 重要慣例
- 垂直切分、功能共置
- 禁止 default export，統一 named export
- 絕對路徑導入（@/）
- 所有記錄、註解、任務皆使用正體中文