# PetLog 費用紀錄設計系統

## 概述

本文件詳細說明 PetLog 費用紀錄功能的視覺設計規範、元件結構與使用指南。設計目標是創建直觀、易用且美觀的費用管理介面。

## 設計原則

### 1. 視覺層級
- **主要元素**：金額作為最突出的視覺焦點，使用較大字體與醒目顏色
- **次要元素**：分類標籤使用色彩區分，日期與描述使用較小字體
- **輔助元素**：操作按鈕採用最小化設計，避免視覺干擾

### 2. 色彩系統
- **分類色彩**：每個費用分類都有專屬顏色，便於快速識別
- **狀態色彩**：使用綠色表示減少，紅色表示增加
- **互動色彩**：遵循現有的主題色彩系統

### 3. 響應式設計
- **桌面版**：使用卡片網格布局，展示更多資訊
- **行動版**：縱向排列，優化觸控操作
- **關鍵尺寸**：確保按鈕最小觸控區域為 44px

## 元件規範

### ExpenseCard 費用卡片

#### 視覺結構
```
┌─────────────────────────────────────┐
│ [💰] NT$1,200    [醫療]    [編輯][刪除] │
│      小白                           │
│                                   │
│ 📄 定期健康檢查                      │
│ 📅 2024年1月15日                    │
└─────────────────────────────────────┘
```

#### 設計要點
- **金額顯示**：使用 `text-lg font-semibold` 作為主要視覺焦點
- **圓形圖標**：12x12 的圓形背景，內含美元符號圖標
- **分類標籤**：緊鄰金額，使用 CategoryBadge 元件
- **懸停效果**：`hover:shadow-md` 與 `hover:border-primary/20`

#### 響應式行為
- **桌面版**：完整顯示所有元素
- **行動版**：保持相同布局，調整字體大小

### CategoryBadge 分類標籤

#### 色彩配置
| 分類 | 主色 | 背景色 | 邊框色 | 暗色主題 |
|------|------|--------|--------|----------|
| 醫療 | `text-red-800` | `bg-red-100` | `border-red-200` | `dark:bg-red-900/20 dark:text-red-300` |
| 飼料 | `text-green-800` | `bg-green-100` | `border-green-200` | `dark:bg-green-900/20 dark:text-green-300` |
| 保健品 | `text-blue-800` | `bg-blue-100` | `border-blue-200` | `dark:bg-blue-900/20 dark:text-blue-300` |
| 日用品 | `text-purple-800` | `bg-purple-100` | `border-purple-200` | `dark:bg-purple-900/20 dark:text-purple-300` |
| 其他 | `text-gray-800` | `bg-gray-100` | `border-gray-200` | `dark:bg-gray-900/20 dark:text-gray-300` |

#### 樣式規格
- **形狀**：`rounded-full` 圓角標籤
- **內距**：`px-2.5 py-0.5`
- **字體**：`text-xs font-medium`
- **邊框**：`border` 1px 實線

### SummaryPanel 摘要面板

#### 布局結構
```
統計卡片區域 (3欄網格)
├── 總支出卡片
├── 本月支出卡片 (含趨勢指示)
└── 日均支出卡片

分類統計區域
├── 標題: "分類統計"
└── 分類列表 (標籤 + 金額 + 百分比)

最近費用區域
├── 標題: "最近費用"
└── 費用列表 (日期 + 標籤 + 金額)
```

#### 設計特點
- **統計卡片**：使用 `CardHeader` 與 `CardContent` 結構
- **趨勢指示**：使用 `TrendingUp`/`TrendingDown` 圖標配合顏色
- **網格布局**：`md:grid-cols-2 lg:grid-cols-3` 響應式調整

### ExpenseCharts 圖表元件

#### 趨勢圖設計
- **樣式**：簡化的條狀圖，使用 CSS 寬度表示數值比例
- **顏色**：使用主題色 `bg-primary`
- **動畫**：可考慮加入 CSS transition 效果

#### 圓餅圖設計
- **實現方式**：使用 CSS `conic-gradient` 創建分段圓餅圖
- **圖例**：垂直排列，包含色塊、標籤、金額與百分比
- **尺寸**：固定 192x192px (12rem)

## 響應式設計斷點

### 桌面版 (≥1024px)
- 使用 3 欄網格顯示統計卡片
- 圖表並排顯示 (2 欄)
- 完整顯示所有元素

### 平板版 (768px - 1023px)
- 統計卡片調整為 2 欄
- 圖表保持並排
- 適當調整間距

### 行動版 (<768px)
- 所有元素改為單欄顯示
- 增加觸控友善的按鈕尺寸
- 優化字體大小與間距

## 動畫與互動

### 懸停效果
- **卡片**：`hover:shadow-md transition-all duration-200`
- **按鈕**：`hover:bg-accent-foreground/20`
- **標籤**：無特殊懸停效果，保持簡潔

### 載入狀態
- **骨架屏**：使用 `animate-pulse` 與 `bg-muted` 創建載入效果
- **按鈕載入**：顯示 "處理中..." 文字並禁用按鈕

### 過渡動畫
- **頁面切換**：使用 `animate-fade-in` 自訂動畫
- **列表更新**：保持流暢的視覺過渡

## 可用性與無障礙

### 色彩對比
- 所有分類標籤都符合 WCAG AA 標準
- 暗色主題提供足夠的對比度

### 鍵盤導航
- 所有互動元素支援 Tab 鍵導航
- 使用 `focus-visible:ring-2` 提供清楚的焦點指示

### 語義標記
- 使用適當的 HTML 語義標籤
- 為圖標提供適當的 `aria-label`

## 實作指南

### 元件使用範例

```tsx
import { ExpenseCard, CategoryBadge, SummaryPanel } from '@/components/expenses';

// 基本費用卡片
<ExpenseCard 
  expense={expense}
  onEdit={handleEdit}
  onDelete={handleDelete}
/>

// 分類標籤
<CategoryBadge category="醫療" />

// 摘要面板
<SummaryPanel 
  summary={summaryData}
  loading={isLoading}
/>
```

### 最佳實踐

1. **資料格式化**：始終使用統一的格式化函式處理金額與日期
2. **錯誤處理**：提供適當的載入與錯誤狀態
3. **效能優化**：使用 React.memo 優化大列表渲染
4. **類型安全**：充分利用 TypeScript 類型定義

## 未來擴展

### 潛在改進
- 加入更豐富的圖表庫 (如 Recharts)
- 支援自訂分類顏色
- 增加更多統計維度
- 支援匯出與分享功能

### 維護注意事項
- 定期檢查色彩對比度
- 更新響應式設計適應新裝置
- 收集使用者反饋進行迭代改進